<app-header></app-header>
<!-- Category Filter -->
<div class="pt-8 mb-8 mx-4 md:mx-10 my-8">
    <ul class="flex gap-2 overflow-x-auto scrollbar-hidden text-[14px] font-regular pt-4">
    @for (category of categories; track $index) {
      <li (click)="selectCategory(category)"
        class="cursor-pointer px-4 py-2 border rounded-full whitespace-nowrap"
        [ngClass]="{
          'border-orange-500 text-orange-500': selectedCategory === category,
          'border-transparent text-black': selectedCategory !== category
        }"
      >
        {{ category }}
      </li>
    }
  </ul>
</div>

<!-- Videos Content -->
<div>
  <!-- Filtered View (when category is selected) -->
   @if (isFilteredView()) {
  <div class="mb-8 mx-4 md:mx-10 my-8">

    <!-- Centered Category Heading -->
    <div class="text-center mb-8">
      <div class="flex justify-center items-center gap-3">
        <img src="/img/videosImg.png" alt="{{ selectedCategory }}" class="w-8 h-8" />
        <h1 class="text-[28px] md:text-[36px] font-bold text-gray-800">{{ selectedCategory }}</h1>
      </div>
    </div>

    <!-- Search Bar -->
    <div class="mb-8">
      <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
        <!-- Search Input -->
        <div class="w-full md:flex-1">
          <app-search (searchChange)="onSearchChange($event)"></app-search>
        </div>
      </div>
    </div>

    <!-- Grid Layout for Videos -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-8">
      @for (video of getFilteredVideos(); track $index) {
      <a [href]="video.href" class="block">
        <div class="relative overflow-hidden rounded-lg w-full aspect-video">
          <img
            [src]="video.thumbnail"
            class="rounded-lg drop-shadow-lg w-full h-full object-cover transition-transform duration-300 transform hover:scale-110"
            loading="lazy"
            [alt]="video.title"
          />
        </div>
        <div class="font-semibold mt-2 truncate text-[14px]">{{ video.title }}</div>
        <div class="text-xs font-light">{{ video.timeAgo }}</div>
      </a>
      }
    </div>

    <!-- Pagination at the bottom -->
    <div class="mt-8 flex justify-center">
      <app-pagination
        [currentPage]="currentPage"
        [totalPages]="totalPages"
        (pageChange)="onPageChange($event)"
      ></app-pagination>
    </div>
  </div>
  } @else {

  <!-- All Categories View (default sections) -->
  <div >
    <!-- New in Top Grillin Section -->
    <app-video-carousel [section]="topGrillinSection"></app-video-carousel>

    <!-- Tuesday Morning Coffee Section -->
    <app-video-carousel [section]="tuesdayMorningCoffeeSection"></app-video-carousel>

    <!-- BBQ Recaps Section -->
    <app-bbq-recap-carousel [section]="$any(simpleBBQSection)"></app-bbq-recap-carousel>

    <!-- Record of the Week Section -->
    <app-record-carousel [section]="simpleRecordSection"></app-record-carousel>
  </div>
  }

  <!-- Free Trial Form -->
  <app-free-trial-form></app-free-trial-form>

  <!-- Bottom Image Section -->
  <div class="bg-white relative">
    <img
      src="/img/bottom_image.png"
      alt="Bottom Image"
      class="bottom-0 left-0 w-full object-cover"
    />
  </div>

  <!-- Footer -->
  <app-footer></app-footer>
</div>

<!-- Video Player Modal -->
<app-video-player></app-video-player>
